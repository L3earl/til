---
output: html_notebook
---

# 
수식보다 써먹는 방법에 대해 배워보자

---

# TIP
- 확률이 상상이 안 갈때는 벤 다이어그림을 그려보자
- 확률을 계산할 때는 집합을 생각해보자

# 주의점
- 몇몇 확률은 모든 결과가 fair 하게 일어난다는 것을 전제조건으로 한다 (실제에서는 그렇지 않다)

---

# 단어
## 표본 공간 (Sample Space)
- 발생할 수 있는 모든 결과
ex) 동전을 던지면 나올 수 있는 결과 = 앞면/뒷면/세워짐

### 연속 표본 공간
- 결과가 연속형 변수로 나오는 것 (동전처럼 명목형 변수로 나오는게 아님)
- 무한대까지 갈 수 있다는 것을 유념

## 시행 (Experiment)
- 데이터를 발생시키는 과정
ex) 동전을 던짐

## 사건(Event)
- 표본 공간 s의 부분 집합
ex) 동전 2번을 던져서 나온 결과 중, 앞뒤/뒤앞 나온 것  
ex2) 주사위를 2개 던져서 합이 6인 경우

## 상호 배타적 사건
- 사건들이 서로 연관성이 없는 경유 = 독립적인 경우

# 함수
- P 로 표현
- 블랙박스

# 개수
- #으로 표현

# 사전 확률
- 예전에 일어나서 알고 있는 확률
- 지금 상황에서 알 수 있는 확률

# 사후 확률
- 앞으로 일어날, 특정 사건A가 일어난 상황에서 특정 사건B가 일어날 조건부 확률

---

# 확률의 공리(아무런 반박이 안되는 명확학 원리)
- 고전적인 정의
시행을 무한하게 했을 때, 특정 사건 E가 발생할 경우의 수

- 현대적인 확률론, Axiom (공리 = 부정할 수 없는 것)
부분 집합 E가 일어날 확률은 0~1 사이다  
전체 사건이 일어날 확률은 1이다  
상호 배타적인 사건들이 일어날 확률의 합은 각 확률의 합과 같다  

위 공리들을 이용하여 여러 명제를 만들어 나감

---

# 집합 연산의 법칙
![law_of_set_operation](./img/law_of_set_operation.png)

---

# 증명
증명은 전체 식을 위의 공리와 집합 연산의 법칙까지 인수 분해하는 것 같다

---

# examples
## 1.9 
전체 11명에서 3명 고를때, 남자 6명중 1, 여자 5명중2 골라질 확률은?

여기서 확률의 곱을 합이라 생각함
```{r}
(choose(6,1) * choose(5,2))/choose(11,3)
```

## 3.1
- 
```{r}
(40/900)/(300/900)
```


---

# 조건부 확률
- 사건 F가 발생하는 것으로 알려졌을 때, 사건 E가 일어날 확률
- 전체 표본공간이 변함
- 표현식은 (2번째 강의록 3~4 페이지 참고)
- 강의록에 '이것은 참이다' 부분은 구구단처럼 알아놔야 할 듯 하다
- 좀 더 공부해야 할 듯

## 베이즈 정리
- 조건부 확률에서 파생


# examples
## 3.6
- 생각의 흐름
아는거 부터 확인  
P(A1) = 0.4  
P(A2) = 0.6  
P(D|A1) = 0.1  
P(D|A2) = 0.05  

목표 식을 세움  
P(A1|D) = P(A1 교집합 D) / P(D) = 아는거로 변환 = P(A1)xP(D|A1)/ P(A1 교집합 D) + P(A2 교집합 D) = P(A1)xP(D|A1)/(P(A1)xP(D|A1) + P(A2)xP(D|A2))


```{r}
0.4*0.1/(0.4*0.1 + 0.6*0.05) = 4/7
```

# 공산 (Odds)
- 어떤 일이 일어날 확률/ 일어나지 않을 확률 의 비율

# 독립사건??
- P(B|A) = P(B) 일때, 즉/ A가 주어졌을때 B가 일어날 확률이 그냥 B가 일어날 확률과 같을 때
- 개념적 독립(상호 배타적이라는 것)과 통계적 독립은 다르다
- 그럼 통계적 독립은 왜 따지는가?
- feature간의 영향력을 따질 때 독립인지 확인하는건가?

# ex 3.13
1. 1-P(전체 실패) = 1-(1-p)^n
2. choose(n,k) x <!-- 성공하는 순서에 대한 경우의 수 -->
P^k x (1-P)^(n-k) <!-- 각 성공의 확률 -->
3. p^n


## 확률 변수 (Random Variable)
- 전체 일어날 수 있는 사건 중에 특정 사건의 확률을 실수로 만들어주는 함수
ex) 동전을 n 번 던졌을때 앞면의 개수, output이 0~n 사이에 분포됨

### 이산 확률 변수
- 결과물이 유한함. 명목형 변수 포함

### 연속 확률 변수
- 결과물이 무한할 수 있음. 

### 확률 함수
- p = f(확률 변수로 나오는 실수)
- 결과로 나온 실수를 확률(0 ~ 1) 사이에 매핑해주는 함수
- 2일차 3, 12/13page

### PMF (확률 질량 함수)
- 이산적으로 나온 히스토그램
- 이산적으로 나오지 않고, 밀도가 표현되면 확률 분표

## 기댓값 

### 확률 변수 함수의 기댓값


## 분산
- 평균으로 부터 얼마나 흩어져 있는지


## 베르누이 확률 변수
- 결과가 두개로, 성공/실패로 나오는 확률변수

### 이항 확률 변수
- n번의 독립된 베르누이 확률을 시행
- 결과가 바이너리로 나옴 0,1


### 포아송분포
- 이항 확률에서 파생
- n번 실행하는게 아니라, n의 값이 불분명할때 사용
- n -> 무한으로 보내면 포아송분포가 나옴 (독립 변수 일때)
- 근접한 값을 찾는 것

### 기하 분포
- 독립된 베르누이 확률을 성공할때까지 실행

### 음의 이항 분포
- 독립된 베르누이 확률이 R번 성공할때까지 N번 실행
- N-1 까지 R-1 번 성공해야 되므로, 거기까지는 이항 확률 분포 + 마지막 실행
- 어떻게 응용할 수 있나?
유저가 평균적으로 n번의 접속 시도를 하다 실패하면 이탈한다고 할때?  
비밀번호 틀리는 횟수가 n번 시도에서 R 이상이면 해킹 시도라 판단할때?
 
### 초기하 분포
- 어떤 특징?
비복원 추출 : 복원 추출이 아니므로 한번에 뽑아도 됨

- 언제 사용?
전체 중에서, 몇몇... 슬라이드 확인



<!-- 이 위쪽은 다시 정리 -->

# 연속 확률 변수
- 이산 변수는 특정 점에서 확률값을 가지기 때문에 Sum 으로 접근할 수 있음. = 질량 함수
- 연속 변수는 특정 점에서 확률값을 가지지 않고, 구간에서 확률값을 갖음.
특정 시점, 특정 위치에서의 확률값은 0에 수렴한다.  
ex) 전구가 1년후에 정확히 고장날 확률. 1년 000.1초도 1년이라 인정 안한다면 확률값은 낮아짐
- 포인트에서는 확률값이 없기 때문에 >= 와 > 의 확률값이 같다. (=이 의미가 없다)
- 분산은 일반적인 식을 따름

## 확률 밀도 함수
- 

## 누적 밀도 함수
- 밀도 함수를 누적 한것
- 지수 함수처럼 증가하는 그래프로 표현됨

## 연속 확률 분포
- 균일, 정규, 지수가 많이 쓰임

### 균일 분포
- 특정 구간에서 일어날 확률이 균일
- 특정 구간의 시작점 이전/ 끝 점 이후에는 발생 확률이 없음

#### 누적 분포 함수
- 균일 분포의 누적

### 정규 분포
- 중심극한 정리에서 파생
- 닫힌 형태(close form)이 없기 때문에, 정확한 값이 아닌 근사값을 구해야 함
- 근사값을 구하기위해 표준 정규분포로 변경

#### 표준 정규 분포
- 표준 정규 분포의 값은 공식이 없어서 바로 구하지 못하고, 표를 이용해서 찾음
- 표준 정규분포를 이용하여 데이터의 검증을 할 수 있음 (사건이 독립적이여야 하는가?)


### 이항 분포
- 히스토그램으로 표현되는 분포
- x축 단위 n을 0으로 수렴하게 하면 정규분포처럼 (혹은 밀도 함수) 표현할 수 있다


### 지수 분포
- 포아송 분포와 연관성이 있는 것 같다
- 


#### 포아송, 지수 분포 관계
- 포아송은 특정 기간 동안이ㅡ 특정 수의 

### 감마 분포
### 베타 분포

# 관련된 R 함수들
```{r}
vec <- c(12,15,24,36,37)
mean(vec) # 평균
median(vec) # 중앙값
range(vec) # 범위
diff(range(vec)) # 최대값 - 최소값/ Range를 안 쓰면 각 인덱스끼리의 차이가 나온다
IQR(vec) # 4분위수?, 75%되는 수에서 25%되는 수 빼기
sd(vec) # 표준편차
var(vec) # 분산
sum(vec) # 합
diff(vec) # 차이
min(vec) # 최소값
max(vec) # 최대값

# 연속 확률 분포
x <- seq(from = 3, to = -3, length = 100)
y <- dnorm(x)
plot(x,y)

x <- seq(from = -3, to = 3, by = 0.1)
y <- dnorm(x)
plot(x,y)

# 누적 확률 분포 함수
y <- pnorm(x)
plot(x,y);lines(x,y)

# 랜덤 분포 확률
y <- rnorm(x) 
plot(x,y);lines(x,y)

#??
x <- seq(0.1, by - 0.01)
y <- qnorm(x, mean = 1.1, sd = 0.5)
plot(x,y);lines(x,y)


# histogram
hist(y)

# 이항 분포
## 
x <- seq(0,80, by = 1)
y <- dbinom(x, 80, 0.5)
plot(x,y)

## 동전을 80번 던졌을때, 앞면이 38번 이하로 나올 확률을 구하라
x <- pbinom(38, 80, 0.5) # 이항분포의 누적함수. x축 값에 따른 누적 값 F(X <= x)
x

## 동전을 80번 던졌을 때, 앞면이 나올 확률이 45%가 되려면 몇번 던저야 하나?
x <- qbinom(0.45, 80, 0.5) # 이항 분포에서 x축 값의 Y값
x

## 10개의 랜덤한 값을 200개 중에 0.3 확률로 뽑아라
x <- rbinom(10, 200, 0.3)# 난수 생성해서 넣음 
x


```


# 통계적 추정과 검정 (5일차 수업)
- 샘플을 가지고 모집단에 대한 가정을 검증하는 과정
- 샘플이 무작위로 추출되지 않으면, bias가 생김

## 생각의 과정
- 기획
- 가설을 세우는데, 구하고자 하는 가설과/ 대립 가설을 식으로 만듬
- 검정

## 검정 오류
- 1종 오류 (알파, 유의 수준)
귀무 가설이 옳은데 기각하는 경우

- 2종 오류 (베타)
실제로 거짓인 귀무 가설을 받아드리는 경우

- 검정 과정에서는 알파/ 베타의 확률을 줄이는 방향으로 진행





